@model List<_01_LampshadeQuery.Contracts.Slide.SlideQueryModel>

<!-- Hero Slider Section -->
<section class="relative w-full overflow-hidden">
    <div id="heroSlider" class="relative">
        <!-- Slides Container -->
        <div class="slides-wrapper relative">
            @{ var slideIndex = 0; }
            @foreach (var slide in Model)
            {
                <div class="slide @(slideIndex == 0 ? "active" : "")" data-index="@slideIndex">
                    <!-- Background Image -->
                    <div class="relative h-[400px] sm:h-[500px] lg:h-[600px] overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-l from-background-dark/95 via-background-dark/70 to-transparent z-10"></div>
                        <img src="~/ProductPictures/@slide.Picture" 
                             alt="@slide.PictureAlt" 
                             title="@slide.PictureTitle"
                             class="absolute inset-0 w-full h-full object-cover" />
                        
                        <!-- Content -->
                        <div class="relative z-20 h-full max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8 flex items-center">
                            <div class="max-w-xl">
                                <!-- Heading Badge -->
                                @if (!string.IsNullOrEmpty(slide.Heading))
                                {
                                    <span class="inline-block bg-primary/20 text-primary text-sm font-medium px-4 py-1.5 rounded-full mb-4">
                                        @slide.Heading
                                    </span>
                                }
                                
                                <!-- Title -->
                                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white leading-tight mb-4">
                                    @slide.Title
                                </h2>
                                
                                <!-- Description -->
                                @if (!string.IsNullOrEmpty(slide.Text))
                                {
                                    <p class="text-text-secondary text-base sm:text-lg mb-6 leading-relaxed">
                                        @slide.Text
                                    </p>
                                }
                                
                                <!-- CTA Button -->
                                @if (!string.IsNullOrEmpty(slide.Link))
                                {
                                    <a href="@slide.Link" 
                                       class="inline-flex items-center gap-2 bg-primary hover:bg-blue-600 text-white font-bold px-6 py-3 rounded-lg transition-colors shadow-lg shadow-primary/25">
                                        @(string.IsNullOrEmpty(slide.BtnText) ? "مشاهده محصولات" : slide.BtnText)
                                        <span class="material-symbols-outlined text-[20px]">arrow_back</span>
                                    </a>
                                }
                            </div>
                        </div>
                    </div>
                </div>
                slideIndex++;
            }
        </div>
        
        <!-- Navigation Arrows -->
        @if (Model.Count > 1)
        {
            <button id="prevSlide" class="absolute top-1/2 right-4 -translate-y-1/2 z-30 size-12 bg-surface-dark/80 backdrop-blur text-white rounded-full flex items-center justify-center hover:bg-primary transition-colors border border-border-dark">
                <span class="material-symbols-outlined">chevron_right</span>
            </button>
            <button id="nextSlide" class="absolute top-1/2 left-4 -translate-y-1/2 z-30 size-12 bg-surface-dark/80 backdrop-blur text-white rounded-full flex items-center justify-center hover:bg-primary transition-colors border border-border-dark">
                <span class="material-symbols-outlined">chevron_left</span>
            </button>
            
            <!-- Dots Navigation -->
            <div class="absolute bottom-6 left-1/2 -translate-x-1/2 z-30 flex items-center gap-2">
                @for (int i = 0; i < Model.Count; i++)
                {
                    <button class="slide-dot size-3 rounded-full bg-white/30 hover:bg-white/60 transition-colors @(i == 0 ? "!bg-primary !w-8" : "")" data-index="@i"></button>
                }
            </div>
        }
    </div>
</section>

<!-- Slider JavaScript -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const slider = document.getElementById('heroSlider');
        if (!slider) return;
        
        const slides = slider.querySelectorAll('.slide');
        const dots = slider.querySelectorAll('.slide-dot');
        const prevBtn = document.getElementById('prevSlide');
        const nextBtn = document.getElementById('nextSlide');
        
        if (slides.length <= 1) return;
        
        let currentIndex = 0;
        let autoplayInterval;
        
        function showSlide(index) {
            // Hide all slides
            slides.forEach((slide, i) => {
                slide.classList.remove('active');
                slide.style.opacity = '0';
                slide.style.position = 'absolute';
                slide.style.top = '0';
                slide.style.left = '0';
                slide.style.width = '100%';
            });
            
            // Update dots
            dots.forEach((dot, i) => {
                dot.classList.remove('!bg-primary', '!w-8');
                dot.classList.add('bg-white/30');
            });
            
            // Show current slide
            slides[index].classList.add('active');
            slides[index].style.opacity = '1';
            slides[index].style.position = 'relative';
            
            // Update current dot
            if (dots[index]) {
                dots[index].classList.add('!bg-primary', '!w-8');
                dots[index].classList.remove('bg-white/30');
            }
            
            currentIndex = index;
        }
        
        function nextSlide() {
            const next = (currentIndex + 1) % slides.length;
            showSlide(next);
        }
        
        function prevSlide() {
            const prev = (currentIndex - 1 + slides.length) % slides.length;
            showSlide(prev);
        }
        
        function startAutoplay() {
            autoplayInterval = setInterval(nextSlide, 5000);
        }
        
        function stopAutoplay() {
            clearInterval(autoplayInterval);
        }
        
        // Initialize
        slides.forEach((slide, i) => {
            if (i !== 0) {
                slide.style.opacity = '0';
                slide.style.position = 'absolute';
                slide.style.top = '0';
                slide.style.left = '0';
                slide.style.width = '100%';
            }
        });
        
        // Event listeners
        if (nextBtn) nextBtn.addEventListener('click', () => { stopAutoplay(); nextSlide(); startAutoplay(); });
        if (prevBtn) prevBtn.addEventListener('click', () => { stopAutoplay(); prevSlide(); startAutoplay(); });
        
        dots.forEach((dot, i) => {
            dot.addEventListener('click', () => { stopAutoplay(); showSlide(i); startAutoplay(); });
        });
        
        // Start autoplay
        startAutoplay();
        
        // Pause on hover
        slider.addEventListener('mouseenter', stopAutoplay);
        slider.addEventListener('mouseleave', startAutoplay);
    });
</script>
